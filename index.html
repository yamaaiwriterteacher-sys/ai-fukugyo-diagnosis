<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI副業 診断テスト（短文版）</title>
<style>
  :root{
    --bg:#0f172a;        /* slate-900 */
    --panel:#111827;     /* gray-900 */
    --card:#0b1220;      /* custom dark */
    --text:#e5e7eb;      /* gray-200 */
    --muted:#9ca3af;     /* gray-400 */
    --accent:#60a5fa;    /* blue-400 */
    --accent-2:#2563eb;  /* blue-600 */
    --ok:#22c55e;        /* green-500 */
    --warn:#f59e0b;      /* amber-500 */
    --bad:#ef4444;       /* red-500 */
  }

  html,body{height:100%}
  body{
    margin:0; background: radial-gradient(1200px 600px at 80% -10%, #1e293b 0%, #0b1020 40%, #060b16 100%), var(--bg);
    color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Noto Sans JP, Roboto, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing:antialiased; line-height:1.5;
    display:flex; align-items:center; justify-content:center; padding:24px;
  }

  .app{
    width:min(880px, 100%); background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
    border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow: 0 10px 40px rgba(0,0,0,.35);
    overflow:hidden;
  }

  header{
    padding:18px 22px; background:linear-gradient(90deg, rgba(37,99,235,.25), rgba(96,165,250,.05));
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  header h1{ margin:0; font-size: clamp(18px, 2.2vw, 22px); letter-spacing:.2px;}
  header p{ margin:4px 0 0; font-size:14px; color:var(--muted)}

  .panel{ padding:28px; display:flex; gap:28px; flex-wrap:wrap; align-items:stretch}
  .intro, .card{ flex:1 1 320px; background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:22px}
  .intro h2, .card h2{margin:0 0 8px; font-size: clamp(18px,2vw,20px)}
  .intro p{margin:0; color:var(--muted)}

  .start-wrap{ display:flex; flex-direction:column; gap:14px; justify-content:center}
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:white; border:0;
    padding:14px 18px; border-radius:10px; font-weight:700; cursor:pointer; letter-spacing:.2px;
    transition: transform .06s ease, filter .15s ease;
  }
  .btn:hover{ filter:brightness(1.05)}
  .btn:active{ transform:translateY(1px)}
  .btn.secondary{ background:transparent; border:1px solid rgba(255,255,255,.12); color:var(--text); font-weight:600}
  .btn.block{ width:100% }

  /* Question page */
  .q-wrap{ padding:22px}
  .progress{ height:8px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; margin:8px 0 18px}
  .bar{ height:100%; width:0%; background:linear-gradient(90deg, #60a5fa, #22c55e)}
  .q-meta{ display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:14px; margin-bottom:8px}
  .q-title{ font-size: clamp(18px,2vw,20px); margin:0 0 12px}
  .answers{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px}
  .answer{
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08); color:var(--text);
    padding:14px; border-radius:10px; text-align:left; cursor:pointer; transition: border-color .15s ease, background .15s ease, transform .05s ease;
    min-height:52px; white-space:normal; word-break:keep-all; line-height:1.4;
  }
  .answer:hover{ border-color:rgba(96,165,250,.5); background:rgba(37,99,235,.08)}
  .answer:active{ transform: translateY(1px) }

  /* Result */
  .result{ padding:26px; display:grid; gap:14px}
  .score{ font-size: clamp(22px, 3vw, 28px); margin:0}
  .badge{
    display:inline-flex; gap:8px; align-items:center; font-weight:700; padding:8px 12px; border-radius:999px;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); color:var(--text)
  }
  .good{ box-shadow: inset 0 0 0 1px rgba(34,197,94,.35); background: rgba(34,197,94,.12) }
  .warn{ box-shadow: inset 0 0 0 1px rgba(245,158,11,.35); background: rgba(245,158,11,.12) }
  .bad{  box-shadow: inset 0 0 0 1px rgba(239,68,68,.35);  background: rgba(239,68,68,.12) }

  /* Pages / transitions */
  .page{ display:none; opacity:0; transform: translateY(6px); transition: opacity .18s ease, transform .18s ease}
  .page.active{ display:block; opacity:1; transform: translateY(0)}

  footer{ padding:12px 18px; color:var(--muted); font-size:12px; text-align:center; border-top:1px solid rgba(255,255,255,.06)}
  .small{ font-size:12px; color:var(--muted) }

  @media (max-width: 560px){
    .answers{ grid-template-columns: 1fr }
  }
</style>
</head>
<body>
  <main class="app" id="app">
    <header>
      <h1>AI副業 診断テスト</h1>
      <p>全10問／1問ずつ表示。クリックすると次へ進みます。</p>
    </header>

    <!-- PAGE: Intro -->
    <section class="panel page active" id="page-intro" aria-labelledby="intro-title">
      <div class="intro">
        <h2 id="intro-title">こんな人におすすめ</h2>
        <p>「長文が読みにくい」「サクッと判定したい」方向けに、回答を短文にしました。20点以上は<strong>AI副業おすすめ</strong>判定になります。</p>
      </div>
      <div class="card start-wrap">
        <h2>診断を開始</h2>
        <button class="btn" id="btn-start" aria-label="診断を開始する">診断を開始する ▶</button>
        <button class="btn secondary" id="btn-reset">リセット</button>
        <p class="small">所要時間の目安：1〜2分</p>
      </div>
    </section>

    <!-- PAGE: Question -->
    <section class="page" id="page-question" aria-live="polite">
      <div class="q-wrap">
        <div class="q-meta">
          <span id="q-step">Q 1 / 10</span>
          <span id="q-progress-text">進捗 0%</span>
        </div>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <h2 class="q-title" id="q-title">質問タイトル</h2>
        <div class="answers" id="answers"></div>
      </div>
    </section>

    <!-- PAGE: Result -->
    <section class="page" id="page-result" aria-labelledby="result-title">
      <div class="result">
        <h2 id="result-title">診断結果</h2>
        <p class="score" id="score"></p>
        <div id="judge" class="badge">判定</div>
        <div id="advice" class="card" style="margin-top:6px">
          <h2 style="margin:0 0 6px">ひとことアドバイス</h2>
          <p id="advice-text" style="margin:0; color:var(--muted)"></p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:6px">
          <button class="btn" id="btn-retry">もう一度やる</button>
          <button class="btn secondary" id="btn-share">結果をコピー</button>
        </div>
      </div>
    </section>

    <footer>© AI副業 診断テスト</footer>
  </main>

<script>
/* ====== 短文版 質問セット（各4択：3/2/1/0点） ====== */
const questions = [
  { title:"目的の明確さ", answers:[
      {text:"明確で数値化済み", value:3},
      {text:"だいたい決まってる", value:2},
      {text:"ぼんやりある", value:1},
      {text:"特にない", value:0}
  ]},
  { title:"時間の確保", answers:[
      {text:"毎日1h以上", value:3},
      {text:"週4〜5日30分", value:2},
      {text:"週2〜3日だけ", value:1},
      {text:"ほぼ取れない", value:0}
  ]},
  { title:"自己管理", answers:[
      {text:"計画通りに進める", value:3},
      {text:"概ねできる", value:2},
      {text:"気分で左右される", value:1},
      {text:"苦手", value:0}
  ]},
  { title:"学習意欲", answers:[
      {text:"毎週インプット", value:3},
      {text:"新しい事が好き", value:2},
      {text:"必要ならやる", value:1},
      {text:"基本やらない", value:0}
  ]},
  { title:"責任感・期限", answers:[
      {text:"必ず守る", value:3},
      {text:"ほぼ守る", value:2},
      {text:"時々遅れる", value:1},
      {text:"よく遅れる", value:0}
  ]},
  { title:"コミュ力", answers:[
      {text:"報連相が得意", value:3},
      {text:"普通にできる", value:2},
      {text:"少し不安", value:1},
      {text:"かなり不安", value:0}
  ]},
  { title:"IT基礎", answers:[
      {text:"PC/クラウドOK", value:3},
      {text:"基本操作OK", value:2},
      {text:"スマホ中心", value:1},
      {text:"IT苦手", value:0}
  ]},
  { title:"文章/発信", answers:[
      {text:"書く/直す得意", value:3},
      {text:"短文ならOK", value:2},
      {text:"少し苦手", value:1},
      {text:"かなり苦手", value:0}
  ]},
  { title:"継続力", answers:[
      {text:"毎日コツコツ", value:3},
      {text:"週ベースで継続", value:2},
      {text:"三日坊主気味", value:1},
      {text:"続かない", value:0}
  ]},
  { title:"変化対応", answers:[
      {text:"変化を楽しむ", value:3},
      {text:"適応できる", value:2},
      {text:"少し不安", value:1},
      {text:"苦手", value:0}
  ]}
];

const app = document.getElementById('app');
const pageIntro = document.getElementById('page-intro');
const pageQuestion = document.getElementById('page-question');
const pageResult = document.getElementById('page-result');

const btnStart = document.getElementById('btn-start');
const btnReset = document.getElementById('btn-reset');
const btnRetry = document.getElementById('btn-retry');
const btnShare = document.getElementById('btn-share');

const qTitle = document.getElementById('q-title');
const answersEl = document.getElementById('answers');
const qStep = document.getElementById('q-step');
const bar = document.getElementById('bar');
const qProgressText = document.getElementById('q-progress-text');

const scoreEl = document.getElementById('score');
const judgeEl = document.getElementById('judge');
const adviceEl = document.getElementById('advice-text');

let state;

function init(){
  state = { idx:0, total:0, answers:[] };
  showPage('intro');
}
function showPage(name){
  [pageIntro, pageQuestion, pageResult].forEach(p=>{
    p.classList.remove('active');
  });
  if(name==='intro') pageIntro.classList.add('active');
  if(name==='question') pageQuestion.classList.add('active');
  if(name==='result') pageResult.classList.add('active');
}

function start(){
  state.idx = 0; state.total = 0; state.answers = [];
  renderQuestion();
  showPage('question');
}

function renderQuestion(){
  const i = state.idx;
  const q = questions[i];
  if(!q){ return renderResult(); }

  qTitle.textContent = q.title;
  qStep.textContent = `Q ${i+1} / ${questions.length}`;
  const progress = Math.round((i)/questions.length*100);
  bar.style.width = `${progress}%`;
  qProgressText.textContent = `進捗 ${progress}%`;

  answersEl.innerHTML = '';
  q.answers.forEach((a, idx)=>{
    const b = document.createElement('button');
    b.className = 'answer';
    b.setAttribute('type','button');
    b.setAttribute('aria-label', `${q.title} - ${a.text}`);
    b.textContent = a.text;
    b.addEventListener('click', ()=>selectAnswer(a.value));
    answersEl.appendChild(b);
  });
}

function selectAnswer(val){
  state.answers.push(val);
  state.total += val;
  state.idx += 1;

  // ページ切り替え感（小休止なしで即切替）
  if(state.idx < questions.length){
    renderQuestion(); // 即座に次の“ページ”へ
  }else{
    // 最終：100%にしてから結果へ
    bar.style.width = '100%';
    qProgressText.textContent = '進捗 100%';
    renderResult();
  }
}

function renderResult(){
  // 20点以上は無条件で「AI副業おすすめ」
  const total = state.answers.reduce((s,v)=> s + (v||0), 0);
  const max = questions.length * 3;

  scoreEl.textContent = `合計 ${total} 点（最大 ${max} 点）`;

  let judgeClass='good', judgeText='AI副業おすすめ';
  let advice = 'まずは小さく受託または発信を始め、テンプレで反復。週次で学習と改善を回しましょう。';

  if(total < 12){
    judgeClass='bad';
    judgeText='慎重スタート';
    advice='生活リズムと基礎ITから整えよう。毎日15分の学習＋週1本のアウトプットを目標に。';
  }else if(total < 20){
    judgeClass='warn';
    judgeText='条件つきでおすすめ';
    advice='得点の低い項目を1つだけ底上げしよう（例：期限遵守/継続）。週2〜3日の時間確保が鍵。';
  }
  // 20点以上は常におすすめ（上書きしない）

  judgeEl.className = `badge ${judgeClass}`;
  judgeEl.textContent = judgeText;
  adviceEl.textContent = advice;
  showPage('result');
}

function reset(){
  init();
}

function copyShare(){
  const total = state.answers.reduce((s,v)=> s + (v||0), 0);
  const max = questions.length * 3;
  const txt = `AI副業 診断テスト\n合計: ${total} / ${max} 点\n判定: ${judgeEl.textContent}\n`;
  navigator.clipboard.writeText(txt).then(()=>{
    btnShare.textContent = 'コピーしました！';
    setTimeout(()=> btnShare.textContent = '結果をコピー', 1400);
  }).catch(()=> alert('コピーに失敗しました'));
}

/* ====== Events ====== */
btnStart.addEventListener('click', start);
btnReset.addEventListener('click', reset);
btnRetry.addEventListener('click', start);
btnShare.addEventListener('click', copyShare);

/* 初期化 */
init();
</script>
</body>
</html>
